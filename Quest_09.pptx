CREATE OR REPLACE TYPE TELEFONE_TYPE AS OBJECT(
    numero VARCHAR2(10)
);

CREATE TYPE TELEFONE_VARRAY_TYPE AS VARRAY(3) OF TELEFONE_TYPE;

CREATE TYPE SECRETARIO_TYPE AS OBJECT(
    codigo  INTEGER,
    nome    VARCHAR2(20)
);

CREATE TYPE NT_SECRETARIOS AS TABLE OF SECRETARIO_TYPE;

CREATE OR REPLACE TYPE ASSESOR_TYPE AS OBJECT(
    codigo      INTEGER,
    nome        VARCHAR2(20),
    telefones   TELEFONE_VARRAY_TYPE,
    secretarios NT_SECRETARIOS
);

CREATE TYPE NT_ASSESORES AS TABLE OF ASSESOR_TYPE;

CREATE OR REPLACE TYPE POLITICO_TYPE AS OBJECT(
    codigo      INTEGER,
    nome        VARCHAR2(20),
    nascimento  DATE,
    telefones   TELEFONE_VARRAY_TYPE,
    assesores   NT_ASSESORES
);

CREATE TABLE POLITICO_TB OF POLITICO_TYPE(
    CONSTRAINT codigo_politico_pk PRIMARY KEY (codigo)
)NESTED TABLE assesores STORE AS nt_assesores_tab(
    NESTED TABLE secretarios STORE AS nt_secretarios_tab
);

INSERT INTO POLITICO_TB (codigo, nome, nascimento, telefones, assesores) 
VALUES( 1,
        'Jos√©', 
        '06/06/1999',
        TELEFONE_VARRAY_TYPE(TELEFONE_TYPE(98796-0787), TELEFONE_TYPE(88796-0787), TELEFONE_TYPE(78796-0787)), 
        NT_ASSESORES(ASSESOR_TYPE(10, 'Pedro', TELEFONE_VARRAY_TYPE(TELEFONE_TYPE(68796-0787), TELEFONE_TYPE(58796-0787), TELEFONE_TYPE(48796-0787)), NT_SECRETARIOS(SECRETARIO_TYPE(101, 'Marta'), SECRETARIO_TYPE(102, 'Paula'), SECRETARIO_TYPE(103, 'Eva'), SECRETARIO_TYPE(104, 'Alex'), SECRETARIO_TYPE(105, 'Liva'), SECRETARIO_TYPE(106, 'Yana'))), ASSESOR_TYPE(20, 'Mauro', TELEFONE_VARRAY_TYPE(TELEFONE_TYPE(38796-0787), TELEFONE_TYPE(28796-0787)), NT_SECRETARIOS(SECRETARIO_TYPE(201, 'Igor'), SECRETARIO_TYPE(202, 'Moema'), SECRETARIO_TYPE(203, 'Ike'))), ASSESOR_TYPE(30, 'Jonas', TELEFONE_VARRAY_TYPE(TELEFONE_TYPE(18796-0787)), NT_SECRETARIOS(SECRETARIO_TYPE(301, 'Ives'), SECRETARIO_TYPE(302, 'Keila'))))
);

SELECT p.nome, ass.nome FROM POLITICO_TB p, TABLE(p.assesores) ass;

UPDATE      TABLE(SELECT p.assesores FROM POLITICO_TB p)
SET         nome = 'Peter'
WHERE       nome = 'Pedro';

SELECT p.nome, ass.nome, sec.nome FROM POLITICO_TB p, TABLE(p.assesores) ass, TABLE(ass.secretarios) sec;
